---
// src/components/comments/Giscus.astro
---

<div
  id="cusdis_thread"
  data-host="https://cusdis-nine-drab.vercel.app"
  data-app-id="4d68c0b7-7b1b-4e7e-a3da-6582ee7ee592"
  data-page-id="{{ PAGE_ID }}"
  data-page-url="{{ PAGE_URL }}"
  data-page-title="{{ PAGE_TITLE }}"
></div>

<script async defer src="https://cusdis-nine-drab.vercel.app/js/cusdis.es.js"></script>

<script is:inline>
  function renderCusdis() {
    const container = document.getElementById('cusdis_thread');
    if (container && window.renderCusdis) {
      container.innerHTML = '';
      window.renderCusdis(container);
    }
  }

  // 针对 Astro 的单页跳转处理，确保切换页面后评论框依然能“生起”
  document.addEventListener('astro:page-load', renderCusdis);
</script>

<style is:global>
  #cusdis_thread {
    min-height: 480px !important;
    width: 100% !important;
    border-top: 1px solid #eee;
    padding-top: 2rem;
  }
</style>