---
// src/components/comments/Giscus.astro
---

<div class="cusdis-container mt-12">
  <div id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id="c1b2d13b-76a7-4163-a5af-87a0b90e95e7"
    data-page-id={Astro.url.pathname}
    data-page-url={Astro.url.href}
    data-page-title={Astro.url.pathname}
  ></div>

  <script is:inline src="https://cusdis.com/js/cusdis.es.js" async defer></script>
</div>

<script is:inline>
  // 处理单页跳转：点击新文章时，重新初始化评论框
  document.addEventListener('astro:page-load', () => {
    if (window.renderCusdis) {
      window.renderCusdis(document.getElementById('cusdis_thread'))
    }
  });
</script>

<style is:global>
  .cusdis-container {
    border-top: 1px solid #eee;
    padding-top: 2rem;
    margin-bottom: 4rem;
  }
  #cusdis_thread iframe {
    width: 100% !important;
    min-height: 200px;
  }
</style>